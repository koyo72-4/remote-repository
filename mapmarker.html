<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Title</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>
   <style>
       #mapid {
           height: 380px;
       }
   </style>
</head>
<body>
    <div id="mapid"></div>
    <script>
        var mymap = L.map('mapid').setView([44.4759, -73.2121], 15);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1Ijoic21zdnQ5OSIsImEiOiJjamphYjdkdnIxNTJzM3BwMnU4ZnJpZjFzIn0.ueSbAp0J460BbkiUQojnZg'
        })
        .addTo(mymap);
        var redMarker = L.marker([44.476401, -73.212375]).addTo(mymap);
        var mikeMarker = L.marker([44.476183, -73.211257]).addTo(mymap);
        var asianaMarker = L.marker([44.477952, -73.212368]).addTo(mymap);
        redMarker.bindPopup("<a href='/?name=red-onion' target='_top'>Red Onion</a>");
        mikeMarker.bindPopup("<a href='/?name=mr-mikes' target='_top'>Mr. Mike's</a>");
        asianaMarker.bindPopup("<a href='/?name=asiana-noodle-house' target='_top'>Asiana Noodle House</a>");
    </script>
</body>
</html>





<!-- 
<html><body>
  <div id="mapdiv"></div>
  <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
  <script>
    map = new OpenLayers.Map("mapdiv");
    map.addLayer(new OpenLayers.Layer.OSM());

    var lonLat = new OpenLayers.LonLat(-73.212375, 44.476401)
          .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            map.getProjectionObject() // to Spherical Mercator Projection
          );
    
    var lonLatAgain = new OpenLayers.LonLat(-73.211257, 44.476183)
          .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            map.getProjectionObject() // to Spherical Mercator Projection
          );

    var lonLatAgainAgain = new OpenLayers.LonLat(-73.212368, 44.477952)
        .transform(
            new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
        );

    var zoom=14;

    var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);
    
    let redMarker = markers.addMarker(new OpenLayers.Marker(lonLat));
    
    markers.addMarker(new OpenLayers.Marker(lonLatAgain));

    markers.addMarker(new OpenLayers.Marker(lonLatAgainAgain));

    map.setCenter (lonLat, zoom);

  var controls = {
    selector: new OpenLayers.Control.SelectFeature(vectorLayer, { onSelect: createPopup, onUnselect: destroyPopup })
};

function createPopup(feature) {
    feature.popup = new OpenLayers.Popup.FramedCloud("pop",
        feature.geometry.getBounds().getCenterLonLat(),
        null,
        '<div class="markerContent"' + ' href= /?name=mr-mikes style=text-decoration: none>' + '<a' + ' href= /?name=mr-mikes >' + feature.attributes.description + '</a>' +'</div>',
        null,
        true,
        function () { controls['selector'].unselectAll(); }
    );
    //feature.popup.closeOnMove = true;
    map.addPopup(feature.popup);
}

function destroyPopup(feature) {
    feature.popup.destroy();
    feature.popup = null;
}

map.addControl(controls['selector']);
controls['selector'].activate();
reset: true
  </script>
</body></html>
 -->















<!-- <!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.0.2/css/ol.css" type="text/css">
    <style>
      .map {
        height: 400px;
        width: 100%;
      }
    </style>
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.0.2/build/ol.js"></script>
    <title>OpenLayers example</title>
  </head>
  <body>
    <h2>My Map</h2>
    <div id="map" class="map"></div>
    <script type="text/javascript">
      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          })
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([-73.212375, 44.476401]),
          zoom: 16
        })
      });



var feature = new ol.Feature({
  geometry: new ol.geom.Point(ol.proj.transform[-73.212375, 44.476401]),
//   labelPoint: new ol.Point([-73.212375, 44.476401]),
  name: 'My Polygon'
});

// get the polygon geometry
var poly = feature.getGeometry();

// Render the feature as a point using the coordinates from labelPoint
feature.setGeometryName("-73.212375, 44.476401");

// get the point geometry
var point = feature.getGeometry();

    </script>
  </body>
</html>
_______________________________________________ -->
<!-- <html>
  <head></head>
  <body>
  <div id="mapdiv"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/2.11/lib/OpenLayers.js"></script> 
  <script>
    map = new OpenLayers.Map("mapdiv");
    map.addLayer(new OpenLayers.Layer.OSM());
    
    epsg4326 =  new OpenLayers.Projection("EPSG:4326"); //WGS 1984 projection
    projectTo = map.getProjectionObject(); //The map projection (Spherical Mercator)
   
    var lonLat = new OpenLayers.LonLat( -0.1279688 ,51.5077286 ).transform(epsg4326, projectTo);
          
    
    var zoom=14;
    map.setCenter (lonLat, zoom);

    var vectorLayer = new OpenLayers.Layer.Vector("Overlay");
    
    // Define markers as "features" of the vector layer:
    var feature = new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point( -0.1279688, 51.5077286 ).transform(epsg4326, projectTo),
            {description:'This is the value of<br>the description attribute'} ,
            {externalGraphic: 'img/marker.png', graphicHeight: 25, graphicWidth: 21, graphicXOffset:-12, graphicYOffset:-25  }
        );    
    vectorLayer.addFeatures(feature);
    
    var feature = new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point( -0.1244324, 51.5006728  ).transform(epsg4326, projectTo),
            {description:'Big Ben'} ,
            {externalGraphic: 'img/marker.png', graphicHeight: 25, graphicWidth: 21, graphicXOffset:-12, graphicYOffset:-25  }
        );    
    vectorLayer.addFeatures(feature);

    var feature = new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point( -0.119623, 51.503308  ).transform(epsg4326, projectTo),
            {description:'London Eye'} ,
            {externalGraphic: 'img/marker.png', graphicHeight: 25, graphicWidth: 21, graphicXOffset:-12, graphicYOffset:-25  }
        );    
    vectorLayer.addFeatures(feature);

   
    map.addLayer(vectorLayer);
 
    
    //Add a selector control to the vectorLayer with popup functions
    var controls = {
      selector: new OpenLayers.Control.SelectFeature(vectorLayer, { onSelect: createPopup, onUnselect: destroyPopup })
    };

    function createPopup(feature) {
      feature.popup = new OpenLayers.Popup.FramedCloud("pop",
          feature.geometry.getBounds().getCenterLonLat(),
          null,
          '<div class="markerContent">'+feature.attributes.description+'</div>',
          null,
          true,
          function() { controls['selector'].unselectAll(); }
      );
      //feature.popup.closeOnMove = true;
      map.addPopup(feature.popup);
    }

    function destroyPopup(feature) {
      feature.popup.destroy();
      feature.popup = null;
    }
    
    map.addControl(controls['selector']);
    controls['selector'].activate();
      
  </script>
  
</body></html>
     -->






     <!-- <html>
    <div id="mapdiv"></div>
<header></header>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/2.11/lib/OpenLayers.js"></script> 
<script>
map = new OpenLayers.Map("mapdiv");
map.addLayer(new OpenLayers.Layer.OSM());
epsg4326 = new OpenLayers.Projection("EPSG:4326"); //WGS 1984 projection
projectTo = map.getProjectionObject(); //The map projection (Spherical Mercator)
var lonLat = new OpenLayers.LonLat(-73.2125066115683, 44.4778504937817).transform(epsg4326, projectTo);
var zoom = 14;
map.setCenter(lonLat, zoom);
var vectorLayer = new OpenLayers.Layer.Vector("Overlay");

// Define markers as "features" of the vector layer:

filelist = ["red-onion.json", "mr-mikes.json"]

for (i = 0; i < filelist.length; i++) {


    fetch(filelist[i])
        .then(function (response) {
            myRestaurant = response
            console.log(response)
            return response.text();
        })
        .then(function (myText) {
            // console.log(myText);
            var js_object = JSON.parse(myText);
            console.log(js_object)


            spaceRegex = /\s/g
            urlAddressString = js_object["address"].replace(spaceRegex, "%20")
            fetchMapString = "https://nominatim.openstreetmap.org/search/?q=" + urlAddressString + "&format=json"


            console.log("Fetched JSON in MAP is " + fetchMapString)

            fetch(fetchMapString)
                .then(function (response) {
                    myRestaurant = response
                    console.log(response)
                    return response.text();
                }).then(function (myMapSon) {

                    var js_MapObject = JSON.parse(myMapSon);
                    console.log("js-object is in MAP is...");
                    console.log("name is " + js_object["name"])
                    console.log(js_MapObject);
                    let longitude = js_MapObject[0]["lon"]
                    let latitude = js_MapObject[0]["lat"]




                    var feature = new OpenLayers.Feature.Vector(
                        new OpenLayers.Geometry.Point(longitude, latitude).transform(epsg4326, projectTo),
                        { description: "'" + js_object["name"] + "'" },
                        { externalGraphic: 'img/marker.png', graphicHeight: 25, graphicWidth: 21, graphicXOffset: -12, graphicYOffset: -25 }
                    );

                    vectorLayer.addFeatures(feature);
                })
        })
}

map.addLayer(vectorLayer);


//Add a selector control to the vectorLayer with popup functions
var controls = {
    selector: new OpenLayers.Control.SelectFeature(vectorLayer, { onSelect: createPopup, onUnselect: destroyPopup })
};

function createPopup(feature) {
    feature.popup = new OpenLayers.Popup.FramedCloud("pop",
        feature.geometry.getBounds().getCenterLonLat(),
        null,
        '<div class="markerContent"' + ' href= /?name=mr-mikes style=text-decoration: none>' + '<a' + ' href= /?name=mr-mikes >' + feature.attributes.description + '</a>' +'</div>',
        null,
        true,
        function () { controls['selector'].unselectAll(); }
    );
    //feature.popup.closeOnMove = true;
    map.addPopup(feature.popup);
}

function destroyPopup(feature) {
    feature.popup.destroy();
    feature.popup = null;
}

map.addControl(controls['selector']);
controls['selector'].activate();
reset: true
</script>
</body>
</html> -->